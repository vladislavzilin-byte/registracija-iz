// src/lib/i18n.js
import React from 'react';
import { getLang, setLang } from './storage';
import { useLang } from './LangContext';

export const dict = {
  ru: {
    brand: 'IZ Booking',
    nav_calendar: 'Календарь',
    nav_my: 'Мои записи',
    nav_admin: 'Админ',
    login: 'Вход',
    register: 'Регистрация',
    name: 'Имя',
    instagram: 'Instagram',
    email_opt: 'Email (опционально)',
    phone: 'Телефон',
    phone_or_email: 'Телефон или Email',
    password: 'Пароль',
    logout: 'Выйти',
    my_profile: 'Мой профиль',
    my_bookings: 'Мои записи',
    you_have_x_active: 'У вас {n} активных запись(ей)',
    all: 'Все',
    active: 'Активные',
    canceled: 'Отменённые',
    pending: 'Ожидает подтверждения',
    approved: 'Подтверждена',
    passed: 'Прошла',
    cancel: 'Отменить',
    no_records: 'Нет записей',
    only_future: 'Только будущие',

    // === Финансы ===
    finance_title: 'Финансы',
    finance_subtitle: 'Доходы от бронирований и ручных записей',
    finance_system: 'Система',
    finance_manual: 'Ручные',
    finance_expenses: 'Расходы',
    finance_balance: 'Баланс',
    finance_add_manual: 'Добавить ручную запись',
    finance_history: 'История',
    finance_no_records: 'Нет записей за этот период',
    finance_export_pdf: 'Экспорт в PDF',
    finance_delete_confirm: 'Удалить эту запись из финансов?',
    finance_edit_desc: 'Описание:',
    finance_edit_amount: 'Сумма €:',
    finance_edit_time: 'Время (напр. 10:00 – 18:00):',
    finance_system_entry: 'Системный доход',
    finance_manual_entry: 'Ручной доход',
    finance_report_title: 'Финансовый отчёт',
    finance_report_subtitle: 'Финансовый отчёт за период',
    finance_mode_month: 'Месяц',
    finance_mode_year: 'Год',
    finance_mode_range: 'Период',
    finance_expense_percent: 'Процент расходов:',
    period: 'Период',
    date: 'Дата',
    time: 'Время',
    description: 'Услуги / описание',
    amount: 'Сумма (€)',
    expenses: 'Расходы',
    add: 'Добавить',

    month_0: 'Январь',
    month_1: 'Февраль',
    month_2: 'Март',
    month_3: 'Апрель',
    month_4: 'Май',
    month_5: 'Июнь',
    month_6: 'Июль',
    month_7: 'Август',
    month_8: 'Сентябрь',
    month_9: 'Октябрь',
    month_10: 'Ноябрь',
    month_11: 'Декабрь'
  },

  lt: {
    brand: 'IZ Registracija',
    nav_calendar: 'Kalendorius',
    nav_my: 'Mano vizitai',
    nav_admin: 'Adminas',
    login: 'Prisijungti',
    register: 'Registruotis',
    name: 'Vardas',
    instagram: 'Instagram',
    email_opt: 'El. paštas (nebūtina)',
    phone: 'Telefonas',
    phone_or_email: 'Telefonas arba el. paštas',
    password: 'Slaptažodis',
    logout: 'Atsijungti',
    my_profile: 'Mano profilis',
    my_bookings: 'Mano vizitai',
    you_have_x_active: 'Turite {n} aktyvių vizitų',
    all: 'Visi',
    active: 'Aktyvūs',
    canceled: 'Atšaukti',
    pending: 'Laukia patvirtinimo',
    approved: 'Patvirtinta',
    passed: 'Įvyko',
    cancel: 'Atšaukti',
    no_records: 'Įrašų nėra',
    only_future: 'Tik būsimi',

    // === Finansai ===
    finance_title: 'Finansai',
    finance_subtitle: 'Pajamos iš rezervacijų ir rankinių įrašų',
    finance_system: 'Sistema',
    finance_manual: 'Rankiniai',
    finance_expenses: 'Išlaidos',
    finance_balance: 'Balansas',
    finance_add_manual: 'Pridėti rankinį įrašą',
    finance_history: 'Istorija',
    finance_no_records: 'Nėra įrašų šiam laikotarpiui',
    finance_export_pdf: 'Eksportuoti PDF',
    finance_delete_confirm: 'Ištrinti šį įrašą iš finansų suvestinės?',
    finance_edit_desc: 'Aprašymas:',
    finance_edit_amount: 'Suma €:',
    finance_edit_time: 'Laikas (pvz. 10:00 – 18:00):',
    finance_system_entry: 'Sisteminė pajamų įmoka',
    finance_manual_entry: 'Rankinė pajamų įmoka',
    finance_report_title: 'Finansų ataskaita',
    finance_report_subtitle: 'Finansų ataskaita pagal laikotarpį',
    finance_mode_month: 'Mėnuo',
    finance_mode_year: 'Metai',
    finance_mode_range: 'Laikotarpis',
    finance_expense_percent: 'Išlaidų procentas:',
    period: 'Laikotarpis',
    date: 'Data',
    time: 'Laikas',
    description: 'Paslaugos / aprašymas',
    amount: 'Suma (€)',
    expenses: 'Išlaidos',
    add: 'Pridėti',

    month_0: 'Sausis',
    month_1: 'Vasaris',
    month_2: 'Kovas',
    month_3: 'Balandis',
    month_4: 'Gegužė',
    month_5: 'Birželis',
    month_6: 'Liepa',
    month_7: 'Rugpjūtis',
    month_8: 'Rugsėjis',
    month_9: 'Spalis',
    month_10: 'Lapkritis',
    month_11: 'Gruodis'
  },

  en: {
    brand: 'IZ Booking',
    nav_calendar: 'Calendar',
    nav_my: 'My bookings',
    nav_admin: 'Admin',
    login: 'Login',
    register: 'Sign up',
    name: 'Name',
    instagram: 'Instagram',
    email_opt: 'Email (optional)',
    phone: 'Phone',
    phone_or_email: 'Phone or Email',
    password: 'Password',
    logout: 'Log out',
    my_profile: 'My profile',
    my_bookings: 'My bookings',
    you_have_x_active: 'You have {n} active booking(s)',
    all: 'All',
    active: 'Active',
    canceled: 'Canceled',
    pending: 'Pending approval',
    approved: 'Approved',
    passed: 'Completed',
    cancel: 'Cancel',
    no_records: 'No records',
    only_future: 'Only future',

    // === Finance ===
    finance_title: 'Finance',
    finance_subtitle: 'Income from bookings & manual entries',
    finance_system: 'System',
    finance_manual: 'Manual',
    finance_expenses: 'Expenses',
    finance_balance: 'Balance',
    finance_add_manual: 'Add manual entry',
    finance_history: 'History',
    finance_no_records: 'No records for this period',
    finance_export_pdf: 'Export PDF',
    finance_delete_confirm: 'Delete this entry from finance report?',
    finance_edit_desc: 'Description:',
    finance_edit_amount: 'Amount €:',
    finance_edit_time: 'Time (e.g. 10:00 – 18:00):',
    finance_system_entry: 'System income',
    finance_manual_entry: 'Manual income',
    finance_report_title: 'Finance Report',
    finance_report_subtitle: 'Finance report for period',
    finance_mode_month: 'Month',
    finance_mode_year: 'Year',
    finance_mode_range: 'Custom Range',
    finance_expense_percent: 'Expense percent:',
    period: 'Period',
    date: 'Date',
    time: 'Time',
    description: 'Services / description',
    amount: 'Amount (€)',
    expenses: 'Expenses',
    add: 'Add',

    month_0: 'January',
    month_1: 'February',
    month_2: 'March',
    month_3: 'April',
    month_4: 'May',
    month_5: 'June',
    month_6: 'July',
    month_7: 'August',
    month_8: 'September',
    month_9: 'October',
    month_10: 'November',
    month_11: 'December'
  }
};

// Хук для использования переводов
export function useI18n() {
  const { lang } = useLang();

  const t = (key, vars = {}) => {
    let str = dict[lang]?.[key] ?? dict['ru'][key] ?? key;

    if (vars && typeof vars === 'object') {
      Object.keys(vars).forEach(k => {
        str = str.replaceAll(`{${k}}`, vars[k]);
      });
    }

    return str;
  };

  return { t, lang };
}
